五子棋 初始化：

游戏中心消息自类型
===

ST范围：[50001-59999]

### 约战提示
当用户发起小游戏邀约时候，会收到这个CMD。

```json
{
  "CTT": 403,
  "ST": 50001,
  "M": {
    "desc": "", // 约战文案
     "games": [
            {"icon":"http://img.gank.tv/1.jpg","link":"http://download","version":"100 " },
             {"icon":"http://img.gank.tv/1.jpg","link":"http://download","version":"100"}
        ] # 截图文件URL列表  [ 图标，连接，游戏id，游戏版本号]
  }
} 
```



### 游戏邀约
两个用户都收到该消息，用于显示im 倒计时60s

```json

"CTT": 403,
  "ST": 50002,
  "M": {
    "desc": "", // 邀约状态文案，
    "game_id": "", // 游戏id，
    "name": "", // 游戏标题，
    "vs_id": "", // 约战id，
    "status": "", // 邀约状态，1： 拒绝 2： 失效 3： 未接受 4：等待  5：接受
  }

```

### 游戏结果
游戏结束，推送游戏结果给两个用户

```json

"CTT": 403,
  "ST": 50003,
  "M": {
    "result": "", // 游戏状态：胜利，失败，平局
    "game_id": "", // 游戏id，
    "vs_id": "", // 约战id，
    "record": "", // 今日已约战场次
    "score": "", // 分数，
    "compare_desc": "", // 文案：已超过90%用户 ，
    "victory_desc": "", // 连胜文案 ，
    "users":[ {"user_id":'123"',"pk":2}],//对战pk分数，
  }

```




”约战过于频繁，请稍后重试“


DROP TABLE IF EXISTS `flash_game`;
CREATE TABLE `flash_game` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `status` tinyint(4) NOT NULL DEFAULT '0',
  `allow_undo` tinyint(4) NOT NULL DEFAULT '1' COMMENT '是否可申请悔棋',
  `game_record` varchar(450) NOT NULL DEFAULT '',
  
  `create_time`         datetime            NOT NULL COMMENT '创建时间',
  `update_time`         datetime            NULL COMMENT '更新时间',
    `comment` varchar(64) NOT NULL,
    `name` varchar(64) NOT NULL,
    `version` int(11) NOT NULL Comment '版本信息',
  `tid` smallint(6) NOT NULL DEFAULT '0' COMMENT '比赛id',
  `create_time` timestamp NOT NULL DEFAULT '2016-12-31 16:00:00'
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


`movetime` timestamp NOT NULL DEFAULT '2016-12-31 16:00:00' COMMENT '最后落子时间',
`swap` tinyint(4) NOT NULL,
  `soosyrv_swap` tinyint(4) NOT NULL DEFAULT '0' COMMENT '索索夫规则的第四手交换',
`free_opening` tinyint(4) NOT NULL DEFAULT '0',
  `rule` enum('Yamaguchi','RIF','Soosyrv8','Renju','Gomoku') NOT NULL DEFAULT 'Yamaguchi',
`offer_draw` int(11) NOT NULL DEFAULT '0' COMMENT '如果有玩家提和，记录其id',

`black_time` int(11) NOT NULL COMMENT '剩余秒数',
  `white_time` int(11) NOT NULL,
  `totaltime` int(11) NOT NULL COMMENT '秒数',
ALTER TABLE `games`
  ADD PRIMARY KEY (`id`),
  ADD KEY `black_id` (`black_id`),
  ADD KEY `white_id` (`white_id`),
  ADD KEY `updtime` (`updtime`),
  ADD KEY `game_record` (`game_record`(128)),
  ADD KEY `tid` (`tid`),
  ADD KEY `status` (`status`);




sql


-- 表的结构 `player`
--

CREATE TABLE `player` (
  `id` int(11) NOT NULL,
  `email` varchar(64) NOT NULL,
  `nickname` varchar(32) NOT NULL,
  `password` char(32) NOT NULL,
  `login_times` int(11) NOT NULL,
  `b_win` int(11) NOT NULL DEFAULT '0',
  `b_lose` int(11) NOT NULL DEFAULT '0',
  `w_win` int(11) NOT NULL DEFAULT '0',
  `w_lose` int(11) NOT NULL DEFAULT '0',
  `draw` int(11) NOT NULL DEFAULT '0',
  `games` int(11) NOT NULL DEFAULT '0' COMMENT '总对局数',
  `reg_time` timestamp NOT NULL DEFAULT '2017-12-31 16:00:00',
  `reg_ip` varchar(15) NOT NULL DEFAULT '',
  `last_login_time` timestamp NOT NULL DEFAULT '2017-12-31 16:00:00',
  `last_login_ip` varchar(15) NOT NULL DEFAULT '',
  `score` decimal(15,3) NOT NULL,
  `language` varchar(8) NOT NULL DEFAULT 'zh-CN',
  `intro` varchar(128) NOT NULL DEFAULT 'hi,it''s me'
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


