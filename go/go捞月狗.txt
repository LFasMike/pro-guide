gorm数据操作

DATE_FORMAT( `create_time`, '%Y%m%d') < '20190701'  是把2019-08-20 17:40:14 转换过去的

DATE_FORMAT(from_unixtime( `create_time` ), '%Y%m%d') < '20190701'")  是把 1566340543转换过去的



supervisorctl配置文件目录：
/home/land/beast/conf.d
重启 需要先切到home目录下
supervisorctl update

单元测试：
go test api/go_test.go -v -run="TestFirst" 

orders_stream 表中 type:
// 定义支付类型
const (
    ORDER_PAYMENT_TYPE_MASTER     = int64(1) // 订单
    ORDER_PAYMENT_TYPE_SUPPLEMENT = int64(2) // 补差价
    ORDER_PAYMENT_TYPE_MULTI      = int64(3) // 多订单
)

在服务下调用db数据库 ，需要生产sql客户端， 
一般跨服务调用，建议用RPC内部接口方式调用

查看当前服务所用分支
./beast/bin/plorder_linux_amd64 -h
./beast/bin/plorder_linux_amd64 -v

项目发布 到测试环境
./deploy.sh live linux qa
./deploy.sh godgame linux qa

staging 环境
./deploy.sh live linux stag

redis 分布式锁

日志位置：
tailf /alidata/logs/live.00.log

配置位置
/home/land/beast/conf.d/godgame.json
 
 框架内自己的 protoc3 找不到位置：
 解决： 去除系统目录bin下的，
 应该在/Users/darren/go/src/vendor/iceberg/frame/protoc-gen-go下 
 运行 go build
 生成可执行文件后 mv到 ~/go/bin
 查看which protoc-gen-go
 若在系统目录/usr/local/bin下 则进去删掉或改名字
 在查看，即可解决


查询相关api汇总在：
/Users/darren/go/src/platform/play/server/main.go


go首页查询大神列表 queryGods
/Users/darren/go/src/godgame/api/god.go  


写api 服务位置
/Users/darren/go/src/vendor/laoyuegou.pb/godgame/pb/services.proto


//
brew install protobuf

brew install protoc-gen-go